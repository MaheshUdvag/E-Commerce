(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[16],{483:function(e,t,r){"use strict";var n=r(22);t.a=function(){var e=Object(n.d)((function(e){return e.activeOrder}));return{order:e.order,error:e.error}}},492:function(e,t,r){"use strict";var n=r(22);t.a=function(){var e=Object(n.d)((function(e){return e.userProfile}));return{user:e.user,error:e.error}}},543:function(e,t,r){"use strict";r.r(t);var n=r(23),a=r(104),c=r(494),s=r(428),i=r(8),o=r(12),d=r(550),u=r(539),l=r(545),j=r(551),p=r(68),b=r(0),O=r(486),h=r(22),m=r(15),f=r(215),v=r(170),g=r(101),x=r(171),y=r(168),C=r(28),k=r(14),P=r.n(k),_=r(473),E=r(469),w=r(77),A=r(1),T=function(e){var t=e.order,r=e.token,a=e.shippingAddress,c=Object(b.useState)(!1),s=Object(n.a)(c,2),i=s[0],o=s[1],d=Object(m.g)();return Object(b.useEffect)((function(){i||(paypal.Buttons({createOrder:function(){var e=Object(C.a)(P.a.mark((function e(){var n,c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.g)(t._id,r,a._id);case 2:return n=e.sent,c=n.data,s=c.id,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onApprove:function(){var e=Object(C.a)(P.a.mark((function e(n,a){var c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.orderID,e.next=3,Object(w.d)(c,t._id,r);case 3:201!==(s=e.sent).data.status&&(console.log("reject "+s.data.status),a.reject()),d.push({pathname:"/orderSummary",state:{orderId:t._id,token:r}}),console.log("success "+s.data.status);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),onShippingChange:function(){var e=Object(C.a)(P.a.mark((function e(n,a){var c,s,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.orderID,s=n.shipping_address,e.next=3,Object(w.j)(c,t._id,r,s);case 3:i=e.sent,i.data.addressUpdate||a.reject();case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),onError:function(e){console.error(e)}}).render("#paypal"),o(!0))}),[i,d,t._id,a._id,r]),Object(A.jsx)("div",{id:"paypal"})},S=Object(a.a)((function(e){return Object(c.a)({button:{marginTop:e.spacing(1),marginRight:e.spacing(1)}})})),I=function(e){var t=e.order,r=e.token,a=e.shippingAddress,c=Object(b.useState)("Cash On Delivery"),s=Object(n.a)(c,2),o=s[0],d=s[1],u=S(),l=Object(m.g)(),j=function(){var e=Object(C.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===o){e.next=6;break}return e.next=3,Object(w.c)(t._id,o,a,r);case 3:n=e.sent,"COMPLETED"===n.data.status&&l.push({pathname:"/orderSummary",state:{orderId:t._id,token:r}});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)("div",{children:Object(A.jsxs)(i.a,{container:!0,spacing:5,style:{marginTop:10},children:[Object(A.jsxs)(i.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:[Object(A.jsx)(_.a,{id:"demo-simple-select-helper-label",children:"Choose Payment"}),Object(A.jsxs)(E.a,{native:!0,labelId:"demo-simple-select-helper-label",value:o,onChange:function(e){var t=e.target.value;d(t)},style:{padding:15},inputProps:{name:o},children:[Object(A.jsx)("option",{style:{padding:15},value:"Cash On Delivery",children:"Cash On Delivery"}),Object(A.jsx)("option",{style:{padding:15},value:"PayPal",children:"PayPal"})]})]}),Object(A.jsx)(i.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:"PayPal"===o?Object(A.jsx)(T,{order:t,token:r,shippingAddress:a}):Object(A.jsx)(p.a,{variant:"contained",color:"primary",className:u.button,onClick:j,children:"Place Order"})})]})})},B=r(483),D=r(64),U=r(492),K=["Select Address","Summary","Payment"],N="CHECKOUT_PAGE.CHECKOUT",H="CHECKOUT_PAGE.BACK",G="CHECKOUT_PAGE.NEXT",F=Object(a.a)((function(e){return Object(c.a)({root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}})}));function J(e,t,r,n,a){var c=null===t||void 0===t?void 0:t.address.filter((function(e){return e._id===r}))[0];switch(e){case 0:return(null===t||void 0===t?void 0:t.address.length)>0?Object(A.jsx)(v.a,{address:null===t||void 0===t?void 0:t.address,page:"checkout",selectedAddress:r||""}):Object(A.jsx)(g.a,{});case 1:return n?Object(A.jsx)(x.a,{order:n,page:"summary"}):Object(A.jsx)(A.Fragment,{});case 2:return Object(A.jsx)(I,{order:n,token:a,shippingAddress:c});default:return"Unknown step"}}t.default=function(){var e=Object(U.a)().user,t=F(),r=Object(b.useState)(0),a=Object(n.a)(r,2),c=a[0],v=a[1],g=Object(h.d)((function(e){return e.checkoutAddress}))._id,x=Object(h.c)(),C=Object(m.g)(),k=Object(B.a)().order,P=K,_=N,E=H,w=G,T=Object(D.a)().user.token,S=Object(O.a)().t,I=function(){var e;v((function(e){return e+1})),null===(e=document.getElementById("root"))||void 0===e||e.scrollTo(0,0)},R=function(){var e;v((function(e){return e-1})),null===(e=document.getElementById("root"))||void 0===e||e.scrollTo(0,0)};return Object(b.useEffect)((function(){if(k||C.push("/cart"),!g&&(null===e||void 0===e?void 0:e.address.length)>0){var t=null===e||void 0===e?void 0:e.address.filter((function(e){return"1"===e.isPrimary}))[0];t&&x(Object(f.a)(t._id))}}),[e,x,g,C,k]),Object(A.jsx)(s.a,{children:Object(A.jsxs)(i.a,{container:!0,spacing:4,children:[Object(A.jsx)(i.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:Object(A.jsx)(o.a,{variant:"h4",style:{borderBottom:"2px solid #f0f0f0"},children:S(_)})}),Object(A.jsx)(i.a,{item:!0,lg:9,md:9,sm:12,xs:12,children:Object(A.jsx)(m.d,{children:Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(d.a,{activeStep:c,orientation:"vertical",children:P.map((function(r,n){return Object(A.jsxs)(u.a,{children:[Object(A.jsx)(l.a,{children:Object(A.jsx)(o.a,{variant:"h6",children:r})}),Object(A.jsxs)(j.a,{className:t.actionsContainer,children:[J(n,e,g,k,T),Object(A.jsx)(p.a,{disabled:0===c,onClick:R,className:t.button,children:S(E)}),c<P.length-1&&g&&Object(A.jsx)(p.a,{variant:"contained",color:"primary",onClick:I,className:t.button,children:S(w)})]})]},r)}))})})})}),k&&Object(A.jsx)(i.a,{item:!0,lg:3,md:3,sm:12,xs:12,children:Object(A.jsx)(y.a,{order:k,showCheckout:!1})})]})})}}}]);
//# sourceMappingURL=16.aa4689b4.chunk.js.map